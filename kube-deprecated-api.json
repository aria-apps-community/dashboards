{
  "name": "Kubernetes Deprecated API",
  "url": "Kubernetes-Deprecated-API",
  "eventFilterType": "BYCHART",
  "displayDescription": false,
  "displaySectionTableOfContents": true,
  "displayQueryParameters": true,
  "sections": [
    {
      "name": "APIs",
      "id": "EvNqr",
      "rows": [
        {
          "charts": [
            {
              "anomalySeverity": "medium",
              "anomalyDetectionOn": false,
              "chartSettings": {
                "y1ScaleSIBy1024": false,
                "fixedLegendEnabled": false,
                "fixedLegendFilterField": "CURRENT",
                "y0ScaleSIBy1024": false,
                "fixedLegendFilterLimit": 5,
                "fixedLegendShowSourceName": true,
                "showValueColumn": true,
                "fixedLegendPosition": "RIGHT",
                "customTags": [],
                "showRawValues": false,
                "lineType": "linear",
                "showHosts": false,
                "groupBySource": false,
                "windowing": "full",
                "defaultSortColumn": "tags[\"resource\"]",
                "fixedLegendFilterSort": "TOP",
                "y1Units": "",
                "sortValuesDescending": true,
                "fixedLegendShowMetricName": false,
                "type": "top-k",
                "y1UnitAutoscaling": false,
                "showLabels": false,
                "tagMode": "all",
                "fixedLegendUseRawStats": false,
                "y0UnitAutoscaling": false,
                "fixedLegendDisplayStats": [
                  "CURRENT"
                ],
                "autoColumnTags": false,
                "numTags": 4,
                "sparklineDisplayColor": null,
                "sparklineLineColor": null,
                "sparklineFillColor": null
              },
              "displayConfidenceBounds": false,
              "includeObsoleteMetrics": false,
              "filterOutNonAnomalies": false,
              "name": "Most Used Deprecated API Calls",
              "anomalySampleSize": "8",
              "units": "Units",
              "summarization": "MEAN",
              "base": 0,
              "chartAttributes": {
                "topK": {
                  "labelBy": [
                    "cluster",
                    "resource",
                    "version"
                  ]
                },
                "lineFill": 1,
                "dashboardLayout": {
                  "x": 0,
                  "y": 0,
                  "w": 12,
                  "h": 6
                }
              },
              "sources": [
                {
                  "name": "A",
                  "query": "ts(kube.apiserver.apiserver.request.total.counter and cluster=${cluster_name})",
                  "disabled": true,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false
                },
                {
                  "name": "B",
                  "query": "ts(kube.apiserver.apiserver.requested.deprecated.apis.gauge and cluster=${cluster_name})",
                  "disabled": true,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false
                },
                {
                  "name": "A Clone",
                  "query": "count(join( ${A} AS ts1 INNER JOIN ${B} AS ts2\nUSING (cluster, group, resource, version),\nmetric='newmetric', cluster=ts1.cluster, group=ts1.group, resource=ts1.resource, version=ts1.version,\n ts1 / ts2), cluster, resource, version)",
                  "disabled": false,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false
                }
              ],
              "noDefaultEvents": false,
              "anomalyType": "both"
            }
          ],
          "heightFactor": 120
        },
        {
          "charts": [
            {
              "anomalySeverity": "medium",
              "anomalyDetectionOn": false,
              "chartSettings": {
                "y1ScaleSIBy1024": false,
                "fixedLegendEnabled": false,
                "fixedLegendFilterField": "CURRENT",
                "y0ScaleSIBy1024": false,
                "fixedLegendFilterLimit": 5,
                "fixedLegendShowSourceName": true,
                "showValueColumn": false,
                "fixedLegendPosition": "RIGHT",
                "customTags": [],
                "showRawValues": false,
                "lineType": "linear",
                "showHosts": false,
                "groupBySource": false,
                "windowing": "full",
                "defaultSortColumn": "tags[\"version\"]",
                "fixedLegendFilterSort": "TOP",
                "y1Units": "",
                "sortValuesDescending": true,
                "fixedLegendShowMetricName": false,
                "type": "table",
                "y1UnitAutoscaling": false,
                "showLabels": false,
                "tagMode": "all",
                "fixedLegendUseRawStats": false,
                "y0UnitAutoscaling": false,
                "fixedLegendDisplayStats": [
                  "CURRENT"
                ],
                "autoColumnTags": false,
                "numTags": 4,
                "sparklineDisplayColor": null,
                "sparklineLineColor": null,
                "sparklineFillColor": null
              },
              "displayConfidenceBounds": false,
              "includeObsoleteMetrics": false,
              "filterOutNonAnomalies": false,
              "name": "Deprecated APIs",
              "anomalySampleSize": "8",
              "units": "Units",
              "summarization": "MEAN",
              "base": 0,
              "chartAttributes": {
                "dashboardLinks": {},
                "lineFill": 1,
                "dashboardLayout": {
                  "x": 0,
                  "y": 6,
                  "w": 6,
                  "h": 8
                }
              },
              "sources": [
                {
                  "name": "Query",
                  "query": "ts(\"kube.apiserver.apiserver.requested.deprecated.apis.*\" and cluster=\"${cluster_name}\")",
                  "disabled": false,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false,
                  "sourceDescription": ""
                }
              ],
              "noDefaultEvents": false,
              "anomalyType": "both"
            },
            {
              "chartSettings": {
                "plainMarkdownContent": "<iframe width=\"100%\"height=\"100%\" src=\"https://kubernetes.io/docs/reference/using-api/deprecation-guide/\">Loading Kubernetes.io Deprecation Guidehttps://kubernetes.io/docs/reference/using-api/deprecation-guide/ <iframe>",
                "y1ScaleSIBy1024": false,
                "fixedLegendEnabled": false,
                "fixedLegendFilterField": "CURRENT",
                "y0ScaleSIBy1024": false,
                "fixedLegendFilterLimit": 5,
                "fixedLegendShowSourceName": true,
                "fixedLegendPosition": "RIGHT",
                "customTags": [],
                "lineType": "linear",
                "windowing": "full",
                "fixedLegendFilterSort": "TOP",
                "y1Units": "",
                "fixedLegendShowMetricName": false,
                "type": "markdown-widget",
                "y1UnitAutoscaling": false,
                "tagMode": "all",
                "fixedLegendUseRawStats": false,
                "y0UnitAutoscaling": false,
                "fixedLegendDisplayStats": [
                  "CURRENT"
                ],
                "autoColumnTags": false,
                "numTags": 4,
                "defaultSortColumn": null,
                "sparklineDisplayColor": null,
                "sparklineLineColor": null,
                "sparklineFillColor": null
              },
              "includeObsoleteMetrics": false,
              "name": "Deprecated API Guide",
              "units": "Units",
              "base": 0,
              "chartAttributes": {
                "lineFill": 1,
                "dashboardLayout": {
                  "x": 6,
                  "y": 6,
                  "w": 6,
                  "h": 8
                }
              },
              "sources": [
                {
                  "name": "A",
                  "query": "",
                  "disabled": false,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": true,
                  "querybuilderSerialization": "{\"_v\":1,\"metric\":\"ts()\",\"filters\":[[],\"and\"],\"functions\":[]}"
                }
              ],
              "noDefaultEvents": false
            }
          ],
          "heightFactor": 160
        },
        {
          "charts": [
            {
              "anomalySeverity": "medium",
              "anomalyDetectionOn": false,
              "chartSettings": {
                "y1ScaleSIBy1024": false,
                "fixedLegendEnabled": false,
                "fixedLegendFilterField": "CURRENT",
                "y0ScaleSIBy1024": false,
                "sparklineDisplayFontSize": "100",
                "fixedLegendFilterLimit": 5,
                "fixedLegendShowSourceName": true,
                "showValueColumn": true,
                "fixedLegendPosition": "RIGHT",
                "customTags": [],
                "showRawValues": false,
                "lineType": "linear",
                "showHosts": true,
                "sparklineValueColorMapApplyTo": "TEXT",
                "groupBySource": false,
                "windowing": "full",
                "sparklineSize": "BACKGROUND",
                "fixedLegendFilterSort": "TOP",
                "y1Units": "",
                "sortValuesDescending": true,
                "fixedLegendShowMetricName": false,
                "sparklineDisplayValueType": "VALUE",
                "type": "top-k",
                "y1UnitAutoscaling": false,
                "showLabels": true,
                "sparklineValueTextMapText": [
                  "new highest"
                ],
                "tagMode": "custom",
                "fixedLegendUseRawStats": false,
                "y0UnitAutoscaling": false,
                "fixedLegendDisplayStats": [
                  "CURRENT"
                ],
                "sparklineDisplayHorizontalPosition": "MIDDLE",
                "autoColumnTags": false,
                "numTags": 4,
                "defaultSortColumn": null,
                "sparklineDisplayColor": null,
                "sparklineLineColor": null,
                "sparklineFillColor": null
              },
              "displayConfidenceBounds": false,
              "includeObsoleteMetrics": false,
              "filterOutNonAnomalies": false,
              "name": "Most Used K8S Version",
              "anomalySampleSize": "8",
              "units": "Units",
              "summarization": "MAX",
              "base": 0,
              "chartAttributes": {
                "topK": {
                  "labelBy": [
                    "k8s_version"
                  ]
                },
                "lineFill": 1,
                "nodeMap": {
                  "groupBy": "k8s_version",
                  "metric": "A",
                  "nodeTitleTag": "source"
                },
                "singleStat": {
                  "sparklineDisplayLabel": "A",
                  "sparklineDisplaySubLabel": "New Chart"
                },
                "dashboardLayout": {
                  "x": 0,
                  "y": 14,
                  "w": 3,
                  "h": 5
                },
                "y0ScaleDecimal": false
              },
              "sources": [
                {
                  "name": "A",
                  "query": "count(ts(kubernetes.collector.version), k8s_version)",
                  "disabled": false,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false,
                  "sourceDescription": ""
                }
              ],
              "noDefaultEvents": false,
              "anomalyType": "both"
            },
            {
              "anomalySeverity": "medium",
              "anomalyDetectionOn": false,
              "chartSettings": {
                "y1ScaleSIBy1024": false,
                "fixedLegendEnabled": false,
                "fixedLegendFilterField": "CURRENT",
                "y0ScaleSIBy1024": false,
                "fixedLegendFilterLimit": 5,
                "fixedLegendShowSourceName": true,
                "showValueColumn": true,
                "fixedLegendPosition": "RIGHT",
                "customTags": [],
                "showRawValues": false,
                "lineType": "linear",
                "showHosts": true,
                "groupBySource": false,
                "windowing": "full",
                "fixedLegendFilterSort": "TOP",
                "y1Units": "",
                "sortValuesDescending": true,
                "fixedLegendShowMetricName": false,
                "type": "nodemap",
                "y1UnitAutoscaling": false,
                "showLabels": true,
                "tagMode": "all",
                "fixedLegendUseRawStats": false,
                "y0UnitAutoscaling": false,
                "fixedLegendDisplayStats": [
                  "CURRENT"
                ],
                "autoColumnTags": false,
                "numTags": 4,
                "defaultSortColumn": null,
                "sparklineDisplayColor": null,
                "sparklineLineColor": null,
                "sparklineFillColor": null
              },
              "displayConfidenceBounds": false,
              "includeObsoleteMetrics": false,
              "filterOutNonAnomalies": false,
              "name": "Nodes per versions",
              "anomalySampleSize": "8",
              "units": "Units",
              "summarization": "COUNT",
              "base": 0,
              "chartAttributes": {
                "lineFill": 1,
                "nodeMap": {
                  "groupBy": "k8s_version",
                  "metric": "Cluster Nodes",
                  "nodeTitleTag": "source"
                },
                "dashboardLayout": {
                  "x": 3,
                  "y": 14,
                  "w": 9,
                  "h": 5
                }
              },
              "sources": [
                {
                  "name": "Cluster Nodes",
                  "query": "ts(kubernetes.collector.version and cluster=${cluster_name})",
                  "disabled": false,
                  "secondaryAxis": false,
                  "queryType": "WQL",
                  "querybuilderEnabled": false,
                  "sourceDescription": ""
                }
              ],
              "noDefaultEvents": false,
              "anomalyType": "both"
            }
          ],
          "heightFactor": 100
        }
      ]
    },
    {
      "name": "",
      "id": "wmwgI",
      "rows": []
    }
  ],
  "parameterDetails": {
    "cluster_name": {
      "tagsBlackListRegex": "",
      "parameterType": "DYNAMIC",
      "tagKey": "cluster",
      "queryValue": "collect(max(ts(\"kubernetes.cluster.cpu.limit\"), cluster), taggify(1, cluster, \"*\"))",
      "order": 1,
      "defaultValue": "Label",
      "hideFromView": false,
      "value": "*",
      "label": "cluster",
      "dynamicFieldType": "TAG_KEY",
      "valuesToReadableStrings": {
        "Label": "*"
      },
      "allowAll": false,
      "selectedLabel": "Label"
    }
  },
  "forceV2UI": true
}